!function(a){function b(b){a(".custom-endpoint-url-generating").toggle(!b),a(".custom-endpoint-url").toggle(b),a(".refresh-url-wrap").toggle(b)}function c(){var b=a("#as3cf-cdn-gzip-notice");"cloudfront"===a('#tab-assets input[name="domain"]:checked').val()&&a("#as3cf-assets-enable-gzip").is(":checked")?b.show():b.hide()}var d=a("#tab-assets");a(document).ready(function(){a(".as3cf-setting.as3cf-assets-enable-custom-endpoint").on("click","#refresh-url",function(c){c.preventDefault(),b(!1);var d={_nonce:as3cf_assets.nonces.generate_key,action:"as3cf-assets-generate-key"};a.ajax({url:ajaxurl,type:"POST",dataType:"JSON",data:d,error:function(a,c,d){alert(as3cf_assets.strings.generate_key_error+d),b(!0)},success:function(c,d,e){"undefined"!=typeof c.success?(a("#custom-endpoint-key").val(c.key),a(".display-custom-endpoint-key").html(c.key)):alert(as3cf.strings.generate_key_error+c.error),b(!0)}})}),c(),d.on("change",'input[name="domain"], #as3cf-assets-enable-gzip-wrap',function(a){c()}),a("#process_assets").on("status-change",function(b,c){var d=a(b.target),e=d.find("#as3cf-assets-manual-purge"),f=d.find("#as3cf-assets-manual-scan");c.is_queued||!c.purge_allowed?e.addClass("disabled"):e.removeClass("disabled"),c.is_queued||!c.scan_allowed?f.addClass("disabled"):f.removeClass("disabled"),d.find(".next-scan").html(c.next_scan)}),a(".as3cf-sidebar").on("click",".background-tool .button.scan",{action:"start"},as3cfpro.Sidebar.handleManualAction),a(".as3cf-sidebar").on("click",".background-tool .button.purge",{action:"purge"},as3cfpro.Sidebar.handleManualAction)})}(jQuery);